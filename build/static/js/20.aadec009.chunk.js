(this.webpackJsonpathenaeum=this.webpackJsonpathenaeum||[]).push([[20],{232:function(e,t,n){"use strict";n.r(t);var a=n(6),l=n(0),o=n.n(l),r=n(15),u=n(16),s=n(35),c=n(42),i=n(45),m=n.n(i),f=n(14);t.default=function(e){var t=Object(l.useState)(1),n=Object(a.a)(t,2),i=n[0],b=n[1],h=Object(l.useState)([]),d=Object(a.a)(h,2),g=d[0],E=d[1];Object(l.useEffect)((function(){c.a.getBooks().then((function(e){P(e.books)}))}),[]),Object(l.useEffect)((function(){E(g.slice((i-1)*T,i*T))}),[i]);var j=Object(l.useContext)(r.a),p=j.user,k=(j.setUser,Object(l.useContext)(u.a)),v=Object(a.a)(k,2),y=v[0],T=(v[1],15),x=y.length,C=Object(l.useState)({title:""}),O=Object(a.a)(C,2),B=O[0],N=O[1],I=Object(l.useState)([]),w=Object(a.a)(I,2),P=(w[0],w[1]);Object(l.useEffect)((function(){console.log("new entry: "),console.log(B),""!==B.title&&S(B)}),[B]);var S=function(){c.a.postBook(B)},A=function(e){if("imageLinks"in e)return e.imageLinks.smallThumbnail};return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,null,"Listings "),o.a.createElement(f.TableContainer,null,o.a.createElement(f.Table,null,o.a.createElement(f.TableHeader,null,o.a.createElement("tr",null,o.a.createElement(f.TableCell,null,"Book Name"),o.a.createElement(f.TableCell,null,"Author"),o.a.createElement(f.TableCell,null,"Published Date"),o.a.createElement(f.TableCell,null,"Add to list(s)?"))),o.a.createElement(f.TableBody,null,y.map((function(e,t){return o.a.createElement(f.TableRow,{key:t},o.a.createElement(f.TableCell,null,o.a.createElement("div",{className:"flex items-center text-sm"},o.a.createElement(f.Avatar,{className:"hidden mr-3 md:block",src:A(e.volumeInfo),alt:""}),o.a.createElement("div",null,o.a.createElement("p",{className:"font-semibold"},function(e){return e.title.length>=60?e.title.slice(0,60)+"...":e.title}(e.volumeInfo)),o.a.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400"},p.job)))),o.a.createElement(f.TableCell,null,o.a.createElement("span",{className:"text-sm"},function(e){if("authors"in e)return e.authors.join(", ").length>=40?e.authors.join(", ").slice(0,40)+"...":e.authors.join(", ")}(e.volumeInfo))),o.a.createElement(f.TableCell,null,o.a.createElement(f.Badge,{type:p.status},e.volumeInfo.publishedDate)),o.a.createElement(f.TableCell,null,o.a.createElement("button",{className:"bg-purple-400 hover:bg-blue-700 text-white font-bold py-1 px-4 rounded-full",onClick:function(){!function(e){m.a.fire({icon:"success",title:"Book added to your list",text:"You can view your list at My Page",showConfirmButton:!1}),setTimeout((function(){N({title:e.volumeInfo.title,authors:e.volumeInfo.authors.join(", "),description:e.volumeInfo.description,thumbnail:e.volumeInfo.imageLinks.smallThumbnail}),m.a.close()}),1500)}(e)}},"Add")))})))),o.a.createElement(f.TableFooter,null,o.a.createElement(f.Pagination,{totalResults:x,resultsPerPage:T,label:"Table navigation",onChange:function(e){b(e)}}))))}},35:function(e,t,n){"use strict";var a=n(0),l=n.n(a);t.a=function(e){var t=e.children;return l.a.createElement("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200"},t)}},42:function(e,t,n){"use strict";t.a={getBooks:function(){return fetch("/user/books").then((function(e){return 401!=e.status?e.json().then((function(e){return e})):{message:{msgBody:"Unauthorized"},msgError:!0}}))},postBook:function(e){return fetch("/user/book",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!=e.status?e.json().then((function(e){return e})):{message:{msgBody:"Unauthorized"},msgError:!0}}))},deleteBook:function(e){return fetch("/user/test/"+e,{method:"delete"}).then((function(e){return 401!=e.status?e.json().then((function(e){return e})):{message:{msgBody:"Unauthorized"},msgError:!0}}))}}}}]);
//# sourceMappingURL=20.aadec009.chunk.js.map